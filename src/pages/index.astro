---
import Layout from "../layouts/Layout.astro";
import { FlashcardGenerator } from "../components/flashcard-generator/FlashcardGenerator";
import { ToastProvider } from "../components/ToastProvider";

// This page is protected by middleware, but we add an additional check for defense in depth
const { user } = Astro.locals;

// Defensive check: This should never happen if middleware works correctly,
// but we add it as a safety measure
if (!user) {
  return Astro.redirect("/auth/login");
}
---

<Layout>
  <FlashcardGenerator client:load />
  <ToastProvider client:only="react" />
</Layout>
